<h4>Coupon Enter</h4>
<hr />

<form asp-action="ShowPriceAfterCut" method="post">
    <div class="text-center">
        <h1 class="display-4">Welcome</h1>
    
        <div class="form-group">
            <p>Original Price: 100</p>
            <p>Price after discounted: @ViewBag.DiscountedPrice</p>
        </div>
        <div class="form-group">
            <label for="CouponPhrase">Coupon Code:</label>
            <input type="text" id="CouponPhrase" name="CouponPhrase" class="form-control" />
        </div>

        <div class="form-group">
            <input type="submit" value="Apply Coupon" class="btn btn-primary" />
        </div>
    </div>
</form>

@if (!ViewData.ModelState.IsValid)  //check if the modelstate has error of the enter coupon
{
    <div class="alert alert-danger">
        @foreach (var error in ViewData.ModelState.Values.SelectMany(v => v.Errors)) // Go over all the errors
        {
            <p>@error.ErrorMessage</p>
        }
    </div>
}
else // if there no error with the coupon enter, it will show the price after discount of the coupon
{
    @if (ViewBag.DiscountedPrice != null)
    {
        <div class="alert alert-success">
            <strong>Discounted Price: </strong>@ViewBag.DiscountedPrice
        </div>
    }
}